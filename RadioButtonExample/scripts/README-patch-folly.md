patch-folly-time

What
----
A small, idempotent shell script that patches Folly's `folly/portability/Time.h` files inside the iOS Pods tree to avoid redefinition of `clockid_t` and `CLOCK_*` macros when building with modern Apple SDKs.

Why
---
Certain versions of Folly (as included by RCT-Folly used in older React Native) provide a fallback `clockid_t` typedef and `CLOCK_*` macros unconditionally when their own feature detection thinks clock_gettime is missing. Newer Apple SDKs already define these symbols (and `clockid_t` may be an enum), causing a "typedef redefinition with different types" compiler error.

What the script does
---------------------
- Makes the header safe by wrapping CLOCK_* macro definitions with `#ifndef` guards.
- Only defines a fallback typedef for `clockid_t` when system CLOCK_* macros are not present (we check `CLOCK_REALTIME` as the indicator).
- The patch is idempotent â€” running it multiple times will not reapply the changes.

Files targeted
--------------
- `ios/Pods/RCT-Folly/folly/portability/Time.h`
- `ios/Pods/Headers/Private/RCT-Folly/folly/portability/Time.h` (if present)

Usage
-----
From the repository root:

```bash
./scripts/patch-folly-time.sh
```

Recommended integration
-----------------------
Add the script to your repo and run it automatically after `pod install` by adding a `post_install` step to your `ios/Podfile`, or run it manually after switching branches or performing a `pod install`.

Example Podfile snippet:

```ruby
post_install do |installer|
  system("#{File.join(__dir__, '..', 'scripts', 'patch-folly-time.sh')}")
end
```

Notes
-----
- Best long-term fix is to upgrade RCT-Folly/Folly to a version that includes proper SDK guards. This script is a safe local workaround intended for documentation and reproducible patching.
- Because pods are regenerated by CocoaPods, prefer the Podfile `post_install` approach rather than committing modified Pod files permanently.
